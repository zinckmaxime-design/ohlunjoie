<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="robots" content="noindex,nofollow">
  <title>Ohlun'Joie ‚Äî √âv√©nements</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <span id="logo-emoji" class="logo-emoji">ü§ù</span>
        <span class="brand-name">Ohlun'Joie</span>
      </div>
      <div class="header-actions">
        <div class="view-switch" id="public-tabs">
          <button id="view-timeline" class="tab active" aria-label="Vue Timeline">Timeline</button>
          <button id="view-list" class="tab" aria-label="Vue Liste">Liste</button>
          <button id="view-cards" class="tab" aria-label="Vue Cartes">Cartes</button>
        </div>
        <button id="admin-toggle" class="icon-btn" aria-label="Administration" title="Administration">üîë</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="intro" id="public-intro">
      <h1>√âv√©nements</h1>
      <p id="intro-text">Notre association rassemble des b√©n√©voles passionn√©s qui organisent des √©v√©nements vari√©s pour cr√©er du lien social et enrichir la vie de notre commune.</p>
      <div class="next-event"><span id="next-event-badge" class="badge-info"></span></div>
    </section>

    <section id="public-section">
      <div id="timeline-view" class="view active"></div>
      <div id="list-view" class="view"></div>
      <div id="cards-view" class="view"></div>
    </section>

    <section id="admin-section" hidden aria-hidden="true"></section>
  </main>

  <footer class="site-footer">
    <div class="container">
      D√©velopp√© avec ‚ù§Ô∏è par <strong>Zinck Maxime</strong> ‚Äî 
      <a href="https://www.linkedin.com/in/zinck-maxime-88302b207" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      <hr style="margin:1.5em 0;">
      <section id="contact-section">
        <h3>Nous contacter</h3>
        <form id="contact-form" class="contact-form">
          <label>Nom*<input type="text" name="nom" required></label>
          <label>Email*<input type="email" name="email" required></label>
          <label class="full-width">Message<textarea name="message" rows="3" required></textarea></label>
          <button type="submit" class="btn btn-primary">Envoyer</button>
        </form>
      </section>
    </div>
  </footer>

  <div id="modal-backdrop" class="modal-backdrop" hidden></div>

<!-- MODALE INSCRIPTION ‚Äì Cases √† cocher align√©es (pro) -->
<div id="modal-inscription" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="insc-title">
  <div class="modal-card">
    <button class="modal-close" data-close aria-label="Fermer">‚úï</button>
    <h3 id="insc-title">S'inscrire √† <span id="insc-event-title"></span></h3>
    <p class="modal-meta"><span id="insc-event-meta"></span></p>
    <form id="insc-form" class="form-grid">
      <label>Pr√©nom*<input name="prenom" required autocomplete="given-name"></label>
      <label>Nom*<input name="nom" required autocomplete="family-name"></label>
      <label>Email*<input name="email" type="email" required autocomplete="email"></label>
      <label>T√©l√©phone*<input name="telephone" required autocomplete="tel"></label>
      <label>Heure d'arriv√©e<input name="heure_arrivee" type="time"></label>
      <label>Heure de d√©part<input name="heure_depart" type="time"></label>
      <label class="full-width">Commentaire<textarea name="commentaire" rows="2"></textarea></label>
      <fieldset class="full-width participations" style="margin-top:10px; border:1px dashed #ddd; border-radius:8px; padding:10px 16px 6px;">
        <legend>Participations (min 1 requis)</legend>
        <div style="display: flex; gap: 32px; align-items: center; flex-wrap: wrap;">
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" name="preparation_salle"> Pr√©paration salle</label>
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" name="partie_evenement"> Partie soir√©e</label>
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" name="evenement_entier"> Soir√©e enti√®re</label>
        </div>
      </fieldset>
      <input type="hidden" name="event_id" id="insc-event-id">
      <div class="form-notice full-width">
        <small>Vos donn√©es sont utilis√©es uniquement pour la gestion des inscriptions et ne seront jamais transmises √† des tiers.</small>
      </div>
      <button type="submit" class="btn btn-primary full-width">S'inscrire</button>
    </form>
  </div>
</div>


  <!-- MODALE ADMIN (Login) -->
  <div id="modal-admin" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="admin-title">
    <div class="modal-card modal-card-small">
      <div class="modal-header">
        <h3 id="admin-title">Administration</h3>
        <button class="modal-close" data-close aria-label="Fermer">‚úï</button>
      </div>
      <form id="admin-form" class="admin-login-form">
        <label class="form-group">
          <span class="label-text">Email</span>
          <input id="admin-email" type="email" required autocomplete="email" placeholder="admin@email.com">
        </label>
        <label class="form-group">
          <span class="label-text">Mot de passe</span>
          <input id="admin-password" type="password" required autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </label>
        <button type="submit" class="btn btn-primary btn-large">Se connecter</button>
      </form>
    </div>
  </div>

  <div id="toast" class="toast" role="alert" aria-live="polite"></div>

  <script src="app-v5.js"></script>
<!-- MODALE EDITION EVENEMENT - VERSION ESTH√âTIQUE -->
<div id="modal-edit-event" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="edit-title">
  <div class="modal-card modal-card-large">
    <div class="modal-header">
      <h3 id="edit-title">üìù √âditer l'√©v√©nement</h3>
      <button class="modal-close" data-close aria-label="Fermer">‚úï</button>
    </div>
    
    <form id="form-edit-event" class="form-edit-event">
      <input type="hidden" id="edit-event-id">
      
      <!-- Section Informations principales -->
      <div class="form-section">
        <h4 class="section-title">Infos g√©n√©rales</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Titre de l'√©v√©nement</span>
            <input type="text" id="edit-event-titre" required placeholder="ex: Conf√©rence citoyenne">
          </label>
          
          <label class="form-label">
            <span class="label-text">Lieu</span>
            <input type="text" id="edit-event-lieu" required placeholder="ex: Mairie">
          </label>
        </div>
        
        <label class="form-label full-width">
          <span class="label-text">Description</span>
          <textarea id="edit-event-description" rows="3" placeholder="D√©crivez bri√®vement l'√©v√©nement..."></textarea>
        </label>
      </div>
      
      <!-- Section Date et horaire -->
      <div class="form-section">
        <h4 class="section-title">üìÖ Date & Horaire</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Date</span>
            <input type="date" id="edit-event-date" required>
          </label>
          
          <label class="form-label">
            <span class="label-text">Heure de d√©but</span>
            <input type="time" id="edit-event-heure">
          </label>
        </div>
      </div>
      
      <!-- Section Capacit√© -->
      <div class="form-section">
        <h4 class="section-title">üë• Capacit√©</h4>
        
        <label class="form-label">
          <span class="label-text">Nombre maximum de participants</span>
          <input type="number" id="edit-event-max" min="1" required placeholder="ex: 50">
        </label>
      </div>
      
      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-large">üíæ Enregistrer les modifications</button>
        <button type="button" class="btn btn-secondary btn-large" data-close>Annuler</button>
      </div>
    </form>
  </div>
</div>
<!-- MODALE CR√âATION EVENEMENT - VERSION ESTH√âTIQUE -->
<div id="modal-create-event" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="create-title">
  <div class="modal-card modal-card-large">
    <div class="modal-header">
      <h3 id="create-title">‚ûï Cr√©er un nouvel √©v√©nement</h3>
      <button class="modal-close" data-close aria-label="Fermer">‚úï</button>
    </div>
    
    <form id="form-create-event" class="form-edit-event">
      
      <!-- Section Informations principales -->
      <div class="form-section">
        <h4 class="section-title">‚ÑπÔ∏è Infos g√©n√©rales</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Titre de l'√©v√©nement *</span>
            <input type="text" name="titre" required placeholder="ex: Conf√©rence citoyenne">
          </label>
          
          <label class="form-label">
            <span class="label-text">Lieu *</span>
            <input type="text" name="lieu" required placeholder="ex: Mairie">
          </label>
        </div>
        
        <label class="form-label full-width">
          <span class="label-text">Description</span>
          <textarea name="description" rows="3" placeholder="D√©crivez bri√®vement l'√©v√©nement..."></textarea>
        </label>
      </div>
      
      <!-- Section Date et horaire -->
      <div class="form-section">
        <h4 class="section-title">üìÖ Date & Horaire</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Date *</span>
            <input type="date" name="date" required>
          </label>
          
          <label class="form-label">
            <span class="label-text">Heure de d√©but</span>
            <input type="time" name="heure">
          </label>
        </div>
      </div>
      
      <!-- Section Capacit√© -->
      <div class="form-section">
        <h4 class="section-title">üë• Capacit√©</h4>
        
        <label class="form-label">
          <span class="label-text">Nombre maximum de participants *</span>
          <input type="number" name="max_participants" min="1" required placeholder="ex: 50">
        </label>
      </div>
      
      <!-- Section Visibilit√© -->
      <div class="form-section">
        <h4 class="section-title">üëÅÔ∏è Visibilit√©</h4>
        
        <label class="form-checkbox">
          <input type="checkbox" name="visible" checked>
          <span class="checkbox-label">Rendre cet √©v√©nement visible sur le site public</span>
        </label>
      </div>
      
      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-large">‚úÖ Cr√©er l'√©v√©nement</button>
        <button type="button" class="btn btn-secondary btn-large" data-close>Annuler</button>
      </div>
    </form>
  </div>
</div>

<!-- MODALE EDITION INSCRIPTION -->
<div id="modal-edit-inscription" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="edit-insc-title">
  <div class="modal-card">
    <button class="modal-close" data-close aria-label="Fermer">‚úï</button>
    <h3 id="edit-insc-title">Modifier l'inscription</h3>
    <form id="edit-insc-form" class="form-grid">
      <input type="hidden" id="edit-insc-id">
      <label>Pr√©nom*<input id="edit-insc-prenom" name="prenom" required></label>
      <label>Nom*<input id="edit-insc-nom" name="nom" required></label>
      <label>Email*<input id="edit-insc-email" name="email" type="email" required></label>
      <label>T√©l√©phone*<input id="edit-insc-telephone" name="telephone" required></label>
      <label>Heure d'arriv√©e<input id="edit-insc-arrivee" name="heure_arrivee" type="time"></label>
      <label>Heure de d√©part<input id="edit-insc-depart" name="heure_depart" type="time"></label>
      <label class="full-width">Commentaire<textarea id="edit-insc-commentaire" name="commentaire" rows="2"></textarea></label>
      <fieldset class="full-width participations" style="margin-top:10px; border:1px dashed #ddd; border-radius:8px; padding:10px 16px 6px;">
        <legend>Participations</legend>
        <div style="display: flex; gap: 32px; align-items: center; flex-wrap: wrap;">
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" id="edit-insc-prepa"> Pr√©paration salle</label>
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" id="edit-insc-partie"> Partie soir√©e</label>
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" id="edit-insc-entier"> Soir√©e enti√®re</label>
        </div>
      </fieldset>
      <button type="submit" class="btn btn-primary full-width">Enregistrer</button>
    </form>
  </div>
</div>
<div class="modal" id="modal-admin-user" hidden>
  <div class="modal-card modal-card-large">
    <div class="modal-header">
      <h3 id="admin-user-mod-title">Nouvel Admin</h3>
      <button class="modal-close" data-close aria-label="Fermer">‚úï</button>
    </div>
    <form id="form-admin-user" class="form-admin-user">
      <input type="hidden" id="admin-user-id">
      <div class="form-row-admin">
        <label><span>Pr√©nom</span><input id="admin-user-prenom" required></label>
        <label><span>Nom</span><input id="admin-user-nom" required></label>
        <label><span>Email</span><input id="admin-user-email" required type="email"></label>
      </div>
      <div class="form-row-admin">
        <label>
          <span>R√¥le</span>
          <select id="admin-user-role" required>
            <option value="">Choisir...</option>
            <option value="admin">Admin</option>
            <option value="super_admin">Super Admin</option>
          </select>
        </label>
        <label><span>Mot de passe</span><input id="admin-user-pass" required type="password"></label>
      </div>
      <div class="roles-matrix">
        <div class="roles-matrix-title"><b>Droits par onglet</b></div>
        <table>
          <thead><tr><th>Module</th><th>Consultation</th><th>Modification</th></tr></thead>
          <tbody>
            <tr><td>Dashboard</td><td><input type="checkbox" class="mod-view" data-module="dashboard"></td><td><input type="checkbox" class="mod-edit" data-module="dashboard"></td></tr>
            <tr><td>√âv√©nements</td><td><input type="checkbox" class="mod-view" data-module="events"></td><td><input type="checkbox" class="mod-edit" data-module="events"></td></tr>
            <tr><td>Inscriptions</td><td><input type="checkbox" class="mod-view" data-module="inscriptions"></td><td><input type="checkbox" class="mod-edit" data-module="inscriptions"></td></tr>
            <tr><td>B√©n√©voles</td><td><input type="checkbox" class="mod-view" data-module="volunteers"></td><td><input type="checkbox" class="mod-edit" data-module="volunteers"></td></tr>
            <tr><td>Admins</td><td><input type="checkbox" class="mod-view" data-module="admins"></td><td><input type="checkbox" class="mod-edit" data-module="admins"></td></tr>
            <tr><td>Association</td><td><input type="checkbox" class="mod-view" data-module="association"></td><td><input type="checkbox" class="mod-edit" data-module="association"></td></tr>
            <!-- Ajout des droits pour le module Messages -->
            <tr><td>Messages</td><td><input type="checkbox" class="mod-view" data-module="messages"></td><td><input type="checkbox" class="mod-edit" data-module="messages"></td></tr>
          </tbody>
        </table>
      </div>
      <div style="margin:1em 0 0 0; text-align:right">
        <button type="submit" class="btn btn-primary btn-large">üíæ Enregistrer</button>
      </div>
    </form>
  </div>
</div>




</body>
</html>
