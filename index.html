<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="robots" content="noindex,nofollow">
  <title>Ohlun'Joie â€” Ã‰vÃ©nements</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <span id="logo-emoji" class="logo-emoji">ğŸ¤</span>
        <span class="brand-name">Ohlun'Joie</span>
      </div>
      <div class="header-actions">
        <button id="admin-toggle" class="icon-btn" aria-label="Administration" title="Administration">ğŸ”‘</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="intro" id="public-intro">
      <h1>Ã‰vÃ©nements</h1>
      <p id="intro-text">Notre association rassemble des bÃ©nÃ©voles passionnÃ©s qui organisent des Ã©vÃ©nements variÃ©s pour crÃ©er du lien social et enrichir la vie de notre commune.</p>
      <div class="next-event"><span id="next-event-badge" class="badge-info"></span></div>
    </section>

    <section id="public-section">
      <div id="timeline-view" class="view active"></div>
      <div id="list-view" class="view"></div>
      <div id="cards-view" class="view"></div>
    </section>

    <section id="admin-section" hidden aria-hidden="true"></section>
  </main>

  <footer class="site-footer">
    <div class="container">
      DÃ©veloppÃ© avec â¤ï¸ par <strong>Zinck Maxime</strong> â€” 
      <a href="https://www.linkedin.com/in/zinck-maxime-88302b207" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </div>
  </footer>

  <div id="modal-backdrop" class="modal-backdrop" hidden></div>

<!-- MODALE INSCRIPTION â€“ Cases Ã  cocher alignÃ©es (pro) -->
<div id="modal-inscription" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="insc-title">
  <div class="modal-card">
    <button class="modal-close" data-close aria-label="Fermer">âœ•</button>
    <h3 id="insc-title">S'inscrire Ã  <span id="insc-event-title"></span></h3>
    <p class="modal-meta"><span id="insc-event-meta"></span></p>
    <form id="insc-form" class="form-grid">
      <label>PrÃ©nom*<input name="prenom" required autocomplete="given-name"></label>
      <label>Nom*<input name="nom" required autocomplete="family-name"></label>
      <label>Email*<input name="email" type="email" required autocomplete="email"></label>
      <label>TÃ©lÃ©phone*<input name="telephone" required autocomplete="tel"></label>
      <label>Heure d'arrivÃ©e<input name="heure_arrivee" type="time"></label>
      <label>Heure de dÃ©part<input name="heure_depart" type="time"></label>
      <label class="full-width">Commentaire<textarea name="commentaire" rows="2"></textarea></label>
      <fieldset class="full-width participations" style="margin-top:10px; border:1px dashed #ddd; border-radius:8px; padding:10px 16px 6px;">
        <legend>Participations (min 1 requis)</legend>
        <div style="display: flex; gap: 32px; align-items: center; flex-wrap: wrap;">
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" name="preparation_salle"> PrÃ©paration salle</label>
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" name="partie_evenement"> Partie soirÃ©e</label>
          <label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" name="evenement_entier"> SoirÃ©e entiÃ¨re</label>
        </div>
      </fieldset>
      <input type="hidden" name="event_id" id="insc-event-id">
      <div class="form-notice full-width">
        <small>Vos donnÃ©es sont utilisÃ©es uniquement pour la gestion des inscriptions et ne seront jamais transmises Ã  des tiers.</small>
      </div>
      <button type="submit" class="btn btn-primary full-width">S'inscrire</button>
    </form>
  </div>
</div>


  <!-- MODALE ADMIN (Login) -->
  <div id="modal-admin" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="admin-title">
    <div class="modal-card modal-card-small">
      <div class="modal-header">
        <h3 id="admin-title">Administration</h3>
        <button class="modal-close" data-close aria-label="Fermer">âœ•</button>
      </div>
      <form id="admin-form" class="admin-login-form">
        <label class="form-group">
          <span class="label-text">Email</span>
          <input id="admin-email" type="email" required autocomplete="email" placeholder="admin@email.com">
        </label>
        <label class="form-group">
          <span class="label-text">Mot de passe</span>
          <input id="admin-password" type="password" required autocomplete="current-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </label>
        <button type="submit" class="btn btn-primary btn-large">Se connecter</button>
      </form>
    </div>
  </div>

  <div id="toast" class="toast" role="alert" aria-live="polite"></div>

  <script src="app-v5.js"></script>
<!-- MODALE EDITION EVENEMENT - VERSION ESTHÃ‰TIQUE -->
<div id="modal-edit-event" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="edit-title">
  <div class="modal-card modal-card-large">
    <div class="modal-header">
      <h3 id="edit-title">ğŸ“ Ã‰diter l'Ã©vÃ©nement</h3>
      <button class="modal-close" data-close aria-label="Fermer">âœ•</button>
    </div>
    
    <form id="form-edit-event" class="form-edit-event">
      <input type="hidden" id="edit-event-id">
      
      <!-- Section Informations principales -->
      <div class="form-section">
        <h4 class="section-title">Infos gÃ©nÃ©rales</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Titre de l'Ã©vÃ©nement</span>
            <input type="text" id="edit-event-titre" required placeholder="ex: ConfÃ©rence citoyenne">
          </label>
          
          <label class="form-label">
            <span class="label-text">Lieu</span>
            <input type="text" id="edit-event-lieu" required placeholder="ex: Mairie">
          </label>
        </div>
        
        <label class="form-label full-width">
          <span class="label-text">Description</span>
          <textarea id="edit-event-description" rows="3" placeholder="DÃ©crivez briÃ¨vement l'Ã©vÃ©nement..."></textarea>
        </label>
      </div>
      
      <!-- Section Date et horaire -->
      <div class="form-section">
        <h4 class="section-title">ğŸ“… Date & Horaire</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Date</span>
            <input type="date" id="edit-event-date" required>
          </label>
          
          <label class="form-label">
            <span class="label-text">Heure de dÃ©but</span>
            <input type="time" id="edit-event-heure">
          </label>
        </div>
      </div>
      
      <!-- Section CapacitÃ© -->
      <div class="form-section">
        <h4 class="section-title">ğŸ‘¥ CapacitÃ©</h4>
        
        <label class="form-label">
          <span class="label-text">Nombre maximum de participants</span>
          <input type="number" id="edit-event-max" min="1" required placeholder="ex: 50">
        </label>
      </div>
      
      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-large">ğŸ’¾ Enregistrer les modifications</button>
        <button type="button" class="btn btn-secondary btn-large" data-close>Annuler</button>
      </div>
    </form>
  </div>
</div>
<!-- MODALE CRÃ‰ATION EVENEMENT - VERSION ESTHÃ‰TIQUE -->
<div id="modal-create-event" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="create-title">
  <div class="modal-card modal-card-large">
    <div class="modal-header">
      <h3 id="create-title">â• CrÃ©er un nouvel Ã©vÃ©nement</h3>
      <button class="modal-close" data-close aria-label="Fermer">âœ•</button>
    </div>
    
    <form id="form-create-event" class="form-edit-event">
      
      <!-- Section Informations principales -->
      <div class="form-section">
        <h4 class="section-title">â„¹ï¸ Infos gÃ©nÃ©rales</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Titre de l'Ã©vÃ©nement *</span>
            <input type="text" name="titre" required placeholder="ex: ConfÃ©rence citoyenne">
          </label>
          
          <label class="form-label">
            <span class="label-text">Lieu *</span>
            <input type="text" name="lieu" required placeholder="ex: Mairie">
          </label>
        </div>
        
        <label class="form-label full-width">
          <span class="label-text">Description</span>
          <textarea name="description" rows="3" placeholder="DÃ©crivez briÃ¨vement l'Ã©vÃ©nement..."></textarea>
        </label>
      </div>
      
      <!-- Section Date et horaire -->
      <div class="form-section">
        <h4 class="section-title">ğŸ“… Date & Horaire</h4>
        
        <div class="form-row-2col">
          <label class="form-label">
            <span class="label-text">Date *</span>
            <input type="date" name="date" required>
          </label>
          
          <label class="form-label">
            <span class="label-text">Heure de dÃ©but</span>
            <input type="time" name="heure">
          </label>
        </div>
      </div>
      
      <!-- Section CapacitÃ© -->
      <div class="form-section">
        <h4 class="section-title">ğŸ‘¥ CapacitÃ©</h4>
        
        <label class="form-label">
          <span class="label-text">Nombre maximum de participants *</span>
          <input type="number" name="max_participants" min="1" required placeholder="ex: 50">
        </label>
      </div>
      
      <!-- Section VisibilitÃ© -->
      <div class="form-section">
        <h4 class="section-title">ğŸ‘ï¸ VisibilitÃ©</h4>
        
        <label class="form-checkbox">
          <input type="checkbox" name="visible" checked>
          <span class="checkbox-label">Rendre cet Ã©vÃ©nement visible sur le site public</span>
        </label>
      </div>
      
      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-large">âœ… CrÃ©er l'Ã©vÃ©nement</button>
        <button type="button" class="btn btn-secondary btn-large" data-close>Annuler</button>
      </div>
    </form>
  </div>
</div>
<div class="modal" id="modal-admin-user" hidden>
  <div class="modal-card modal-card-large">
    <div class="modal-header">
      <h3 id="admin-user-mod-title">Nouvel Admin</h3>
      <button class="modal-close" data-close aria-label="Fermer">âœ•</button>
    </div>
    <form id="form-admin-user" class="form-admin-user">
      <input type="hidden" id="admin-user-id">
      <div class="form-row-admin">
        <label><span>PrÃ©nom</span><input id="admin-user-prenom" required></label>
        <label><span>Nom</span><input id="admin-user-nom" required></label>
        <label><span>Email</span><input id="admin-user-email" required type="email"></label>
      </div>
      <div class="form-row-admin">
        <label>
          <span>RÃ´le</span>
          <select id="admin-user-role" required>
            <option value="">Choisir...</option>
            <option value="admin">Admin</option>
            <option value="super_admin">Super Admin</option>
          </select>
        </label>
        <label><span>Mot de passe</span><input id="admin-user-pass" required type="password"></label>
      </div>
      <div class="roles-matrix">
        <div class="roles-matrix-title"><b>Droits par onglet</b></div>
        <table>
          <thead><tr><th>Module</th><th>Consultation</th><th>Modification</th></tr></thead>
          <tbody>
            <tr><td>Dashboard</td><td><input type="checkbox" class="mod-view" data-module="dashboard"></td><td><input type="checkbox" class="mod-edit" data-module="dashboard"></td></tr>
            <tr><td>Ã‰vÃ©nements</td><td><input type="checkbox" class="mod-view" data-module="events"></td><td><input type="checkbox" class="mod-edit" data-module="events"></td></tr>
            <tr><td>Inscriptions</td><td><input type="checkbox" class="mod-view" data-module="inscriptions"></td><td><input type="checkbox" class="mod-edit" data-module="inscriptions"></td></tr>
            <tr><td>BÃ©nÃ©voles</td><td><input type="checkbox" class="mod-view" data-module="volunteers"></td><td><input type="checkbox" class="mod-edit" data-module="volunteers"></td></tr>
            <tr><td>Admins</td><td><input type="checkbox" class="mod-view" data-module="admins"></td><td><input type="checkbox" class="mod-edit" data-module="admins"></td></tr>
            <tr><td>Association</td><td><input type="checkbox" class="mod-view" data-module="association"></td><td><input type="checkbox" class="mod-edit" data-module="association"></td></tr>
          </tbody>
        </table>
      </div>
      <div style="margin:1em 0 0 0; text-align:right">
        <button type="submit" class="btn btn-primary btn-large">ğŸ’¾ Enregistrer</button>
      </div>
    </form>
  </div>
</div>




</body>
</html>
